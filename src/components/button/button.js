// @flow
import React, { Component } from 'react';
import { Link } from 'react-router-dom';
import Spinner from '../spinner/spinner';
import './button.css';

type Props = {
  label:        string,
  size:         's' | 'm' | 'l' | 'xl' | 'xxl' | 'full',
  shape:        'circle' | 'rounded',
  color:        'orange' | 'green' | 'blue' | 'red' | 'grey' | 'purple' | 'white' | '',
  icon?:        'login' | 'logout' | 'search' | 'info' | 'meters' | 'invoices' | 'movingPremises' | 'faq' | 'show'| 'pdf',
  status?:      'unclickable' | 'disabled' | 'loading' | 'inactive' | '',
  inverse?:     boolean,
  transparent?: boolean,
  url?:         string,
  onClick:      Function
};

export default class Button extends Component<Props> {

  static defaultProps = {
    size:     's',
    shape:    'rounded',
    color:    'white',
    label:    '',
    onClick:  () => {}
  };

  handleClick(e/*: SyntheticEvent<HTMLButtonElement>*/)/*: void*/ {
    e.stopPropagation();
    this.props.onClick(e);
  }

  propToClassName(attr/*: string*/, value/*: ?string | boolean*/)/*: string*/ {
    return value
      ? ' Button_' + attr + '_' + value.toString()
      : '';
  }

  className()/*: string*/ {
    let props = ['size', 'shape', 'color', 'transparent', 'icon', 'status', 'inverse'];
    return ['Button'].concat(props.map(propName => this.propToClassName(propName, this.props[propName]))).join('');
  }

  drowIcon()/*: any*/{
    return images[this.props.icon];
  }

  showLabel()/*: any*/{
    let color = this.props.inverse ? this.props.color : 'white';
    if (this.props.status === 'loading'){
      return <Spinner size={this.props.size} color={color}/>
    } else {
      return this.props.icon ? this.drowIcon() : this.props.label.substring(0, 30);
    }
  }

  showLink(url/*: string*/)/*: any */{
    return url.startsWith('http') || url.startsWith('//')
      ? <a href={url} className={this.className()} onClick={e => this.handleClick(e)}>{this.showLabel()}</a>
      : <Link to={url} className={this.className()} onClick={e => this.handleClick(e)}>{this.showLabel()}</Link>
  }

  render(){
    return this.props.url
      ? this.showLink(this.props.url)
      : <button className={this.className()} onClick={e => this.handleClick(e)}>{this.showLabel()}</button>
  };
};

const images = {
  login:
    <svg viewBox="0 0 800 800">
      <use xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" xmlSpace="preserve" />
      <g>
        <g transform="translate(-110.000000, -50.000000)">
          <g transform="translate(20.000000, 50.000000)">
            <path className="st0" d="M466.7,60.3c-24.9,0-46.5,21.6-46.5,46.5c0,26.6,21.6,46.5,46.5,46.5h280.7v493.3H466.7
              c-26.6,0-46.5,21.6-46.5,46.5c0,26.6,21.6,46.5,46.5,46.5H794c24.9,0,46.5-21.6,46.5-46.5V108.5c0-26.6-21.6-46.5-46.5-46.5
              L466.7,60.3z M139.5,447.3h260.8v93c0,26.6,14.9,31.6,33.2,13.3L588,399.2L433.5,244.7c-18.3-18.3-33.2-11.6-33.2,13.3v93H139.5
              V447.3z"/>
          </g>
        </g>
      </g>
    </svg>,
  logout:
    <svg viewBox="0 0 800 800">
      <use xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" xmlSpace="preserve" />
      <g>
        <g transform="translate(-110.000000, -50.000000)">
          <g transform="translate(20.000000, 50.000000)">
            <path className="st0" d="M205.4,61.6c-24.8,0-46.3,19.9-46.3,46.3v584.1c0,26.5,21.5,46.3,46.3,46.3h326c24.8,0,46.3-19.9,46.3-46.3
              s-19.9-46.3-46.3-46.3H251.7V154.3h279.6c26.5,0,46.3-19.9,46.3-46.3c0-26.5-21.5-46.3-46.3-46.3
              C531.4,61.6,205.4,61.6,205.4,61.6z M390.7,447.2H634v92.7c0,26.5,14.9,31.4,33.1,13.2l153.9-153.9L667.1,245.3
              c-18.2-18.2-33.1-11.6-33.1,13.2v92.7H390.7L390.7,447.2L390.7,447.2z"/>
          </g>
        </g>
      </g>
    </svg>,
  search:
    <svg viewBox="0 0 800 800">
      <use xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" xmlSpace="preserve" />
      <path className="st0" d="M758.7,664.4L569.5,475.2c27.9-43.7,43.7-95.3,43.7-150.5c0-155.5-126.8-282.3-282.3-282.3
      S48.6,168.6,48.6,324.1s126.8,282.3,282.3,282.3c53,0,101.7-14.3,144-39.4l190.6,190.6C665.5,757.5,758.7,664.4,758.7,664.4z
       M154,324.1c0-97.4,79.5-177,177-177s177,79.5,177,177s-79.5,177-177,177S154,421.5,154,324.1z"/>
    </svg>,
  info:
    <svg viewBox="0 0 800 800">
      <use xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" xmlSpace="preserve" />
      <g>
        <path className="st0" d="M274,643.5c34.2-106.8,96.1-232.8,108.9-264.8c17.1-47-12.8-68.3-102.5,12.8L261.2,353
          c102.5-113.2,316.1-138.8,243.5,36.3c-44.8,108.9-76.9,181.5-96.1,239.2c-27.8,83.3,40.6,49.1,108.9-12.8
          c8.5,14.9,12.8,19.2,21.4,36.3C387.2,793,222.7,805.8,274,643.5z"/>
        <path className="st0" d="M447.8,158.7c-32,27.8-79,25.6-104.6-2.1c-25.6-27.8-21.4-72.6,10.7-98.2c32-27.8,79-25.6,104.6,2.1
          C481.9,88.2,477.7,130.9,447.8,158.7z"/>
      </g>
    </svg>,
  meters:
    <svg viewBox="190 240 250 250">
      <circle className="st0" cx="380.3" cy="266.2" r="19.5"/>
      <circle className="st0" cx="273.8" cy="440.1" r="28.6"/>
      <path className="st0" d="M238.8,387.5h-49.7v-74h49.7V387.5z M194.1,382.5h39.7v-64h-39.7V382.5z"/>
      <path className="st0" d="M283.5,387.5h-49.7v-74h49.7V387.5z M238.8,382.5h39.7v-64h-39.7V382.5z"/>
      <path className="st0" d="M328.2,387.5h-49.7v-74h49.7V387.5z M283.5,382.5h39.7v-64h-39.7V382.5z"/>
      <path className="st0" d="M372.9,387.5h-49.7v-74h49.7V387.5z M328.2,382.5h39.7v-64h-39.7V382.5z"/>
      <path className="st0" d="M426.2,387.5h-49.7v-74h49.7V387.5z M381.5,382.5h39.7v-64h-39.7V382.5z"/>
      <g>
        <path className="st0" d="M214.6,331.1c7.4,0,13.7,4.7,13.7,19.1c0,14.8-6.2,19.4-13.7,19.4c-7.3,0-13.6-4.7-13.6-19.4
          C201.1,335.8,207.3,331.1,214.6,331.1z M214.6,363.5c6.1,0,6.1-9.1,6.1-13.2c0-3.9,0-12.9-6.1-12.9c-6,0-6,9.1-6,12.9
          C208.6,354.5,208.6,363.5,214.6,363.5z"/>
        <path className="st0" d="M259.1,331.1c7.4,0,13.7,4.7,13.7,19.1c0,14.8-6.2,19.4-13.7,19.4c-7.3,0-13.6-4.7-13.6-19.4
          C245.5,335.8,251.8,331.1,259.1,331.1z M259.1,363.5c6.1,0,6.1-9.1,6.1-13.2c0-3.9,0-12.9-6.1-12.9c-6,0-6,9.1-6,12.9
          C253,354.5,253,363.5,259.1,363.5z"/>
        <path className="st0" d="M300.9,346.9c3.2,0.3,7.9-0.4,7.9-4.6c0-3.1-2.5-4.9-5.2-4.9c-3.8,0-5.8,2.8-5.7,6.6h-7.2
          c0.3-7.6,5.2-12.8,12.8-12.8c5.9,0,12.4,3.7,12.4,10.3c0,3.5-1.7,6.6-5.2,7.6v0.1c4.1,0.9,6.6,4.3,6.6,8.4
          c0,7.8-6.5,12.2-13.8,12.2c-8.3,0-13.9-5-13.8-13.5h7.2c0.2,4,2.2,7.3,6.5,7.3c3.4,0,6-2.3,6-5.8c0-5.6-4.9-5.5-8.6-5.5V346.9z"/>
        <g>
          <polygon className="st0" points="340.1,354.2 349.8,354.2 349.8,341.3 349.7,341.3    "/>
          <path className="st0" d="M325.7,316v69h44.7v-69H325.7z M361.9,360.4H357v8.6h-7.2v-8.6h-15.7v-6.9l16.1-21.6h6.7v22.3h4.9V360.4z"/>
        </g>
        <path className="st0" d="M379,316v69h44.7v-69H379z M400.5,369.7c-7.2,0-13.7-4-13.8-11.8h7.5c0.4,3.3,2.8,5.6,6.1,5.6
          c3.9,0,6.4-3.4,6.4-7.2c0-3.9-2.4-6.9-6.4-6.9c-2.7,0-4.2,1-5.7,3h-6.8l3.7-20.5h20.7v6.2h-15.3l-1.5,8.4l0.1,0.1
          c2-2.1,4.3-2.9,7.3-2.9c7.3,0,11.4,5.7,11.4,12.6C414.2,364,407.9,369.9,400.5,369.7z"/>
      </g>
    </svg>,
  invoices:
    <svg viewBox="0 0 26 26">
      <use xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" xmlSpace="preserve" />
      <g>
        <path d="m17.85,7h2c0.6,0 1-0.4 1-1 0-0.1 0-0.1 0-0.2-0.6-3.3-3.4-5.8-6.9-5.8-3.9,0-7,3.1-7,7 0,0.6 0.1,1.6 0.3,2.3 0.1,0.4 0.2,0.7 0.3,1.1 0.1,0.3-0.2,0.6-0.5,0.6h-2.1c-0.6,0-1,0.4-1,1v2c0,0.6 0.4,1 1,1h3.3c0.2,0 0.5,0.2 0.5,0.4 0.1,0.7 0.2,1.2 0.2,1.6 0,2.1-2.4,4-4.8,5.6-0.1,0.1-0.2,0.3-0.2,0.4s0,0.2 0.1,0.3l1.7,2.5c0.1,0.1 0.3,0.2 0.4,0.2s0.2,0 0.3-0.1c1.2-0.8 2.8-0.9 5.6-0.9 1.7,0 2.7,0.3 3.6,0.6 0.7,0.2 1.5,0.4 2.4,0.4 1.8,0 2.8-0.6 3.5-0.9l.2-.1c0.2-0.1 0.3-0.3 0.3-0.4s0-0.2-0.1-0.2l-1.4-2.7c-0.1-0.2-0.4-0.3-0.7-0.2l-.3,.2c-0.5,0.3-0.8,0.4-1.6,0.4-0.3,0-0.7-0.1-1.3-0.3-1-0.3-2.2-0.6-4.1-0.7-0.4,0-0.6-0.3-0.4-0.7 0.5-1 0.8-2.1 0.8-3.3 0-0.4 0-0.9-0.1-1.4 0-0.3 0.2-0.6 0.5-0.6h5.6c0.6,0 1-0.4 1-1v-2c0-0.6-0.4-1-1-1h-6.7c-0.2,0-0.4-0.2-0.5-0.4-0.2-0.9-0.5-1.8-0.7-2.5-0.1-0.2-0.1-0.8-0.1-1.1 0-1.7 1.3-3 3-3 1.4,0 2.5,0.9 2.9,2.2 0.1,0.3 0.5,0.7 1,0.7z"></path>
      </g>
    </svg>,
  movingPremises:
    <svg viewBox="0 0 800 800">
      <use xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" xmlSpace="preserve" />
      <g>
        <path className="st0" d="M400,130.8c-27,0-48.9,21.9-48.9,48.9v342.5h-24.5V259.7c0-17.2-13.9-31.1-31.1-31.1h0l-111.8,0.1
          c-17.5,0-33.7,9.4-42.4,24.7L70.4,377.5c-8.4,14.8-12.9,31.5-12.9,48.6v114.2c0,17.2,13.9,31.1,31.1,31.1
          c12.3,0,22.9-7.5,28.3-18.5c15.8-32.5,48.9-54.9,87.5-54.9c45.5,0,83.3,31.2,94.3,73.2h178.5c11-42,48.8-73.2,94.3-73.2
          s83.3,31.2,94.3,73.2h76.9V130.8H400z M277.7,399.9H110l69.8-122.3h97.9V399.9z"/>
        <path className="st0" d="M204.4,522.2c-40.6,0-73.5,32.9-73.5,73.5s32.9,73.5,73.5,73.5s73.5-32.9,73.5-73.5S245,522.2,204.4,522.2z
           M204.3,630c-19,0-34.4-15.4-34.4-34.4c0-19,15.4-34.4,34.4-34.4c19,0,34.4,15.4,34.4,34.4C238.7,614.6,223.3,630,204.3,630z"/>
        <path className="st0" d="M571.4,522.2c-40.6,0-73.5,32.9-73.5,73.5s32.9,73.5,73.5,73.5s73.5-32.9,73.5-73.5S612,522.2,571.4,522.2z
           M571.3,630c-19,0-34.4-15.4-34.4-34.4c0-19,15.4-34.4,34.4-34.4c19,0,34.4,15.4,34.4,34.4C605.7,614.6,590.3,630,571.3,630z"/>
      </g>
    </svg>,
  premises:
    <svg viewBox="0 0 800 800">
      <use xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" xmlSpace="preserve" />
      <path className="st0" d="M84.4,686.4H142V56h516v630.3h57.6V744H85.3v-57.6H84.4z M284.7,601.2v114.4h86V601.2H284.7z M428.4,601.2
      v114.4h86V601.2H428.4z M256.4,457.6h-57.6v57.6h57.6V457.6z M486,457.6h-57.6v57.6H486V457.6z M370.7,457.6H314v57.6h57.6v-57.6
      H370.7z M600.4,457.6h-57.6v57.6h57.6V457.6z M256.4,343.3h-57.6v57.6h57.6V343.3z M486,343.3h-57.6v57.6H486V343.3z M370.7,343.3
      H314v57.6h57.6v-57.6H370.7z M600.4,343.3h-57.6v57.6h57.6V343.3z M256.4,228h-57.6v57.6h57.6V228z M486,228h-57.6v57.6H486V228z
       M370.7,228H314v57.6h57.6V228H370.7z M600.4,228h-57.6v57.6h57.6V228z M256.4,113.6h-57.6v57.6h57.6V113.6z M486,113.6h-57.6v57.6
      H486V113.6z M370.7,113.6H314v57.6h57.6v-57.6H370.7z M600.4,113.6h-57.6v57.6h57.6V113.6z"/>
    </svg>,
  faq:
    <svg viewBox="0 0 800 800">
      <use xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" xmlSpace="preserve" />
      <g>
        <path className="st0" d="M155.3,291.3c1.9-151,101.3-238,250.5-238c119.5,0,239,63.1,239,195c0,92.7-44.9,126.2-117.6,172.1
          c-49.7,32.5-62.1,46.8-63.1,104.2H313v-47.8c0-74.6,42.1-107.1,77.4-132.9c39.2-26.8,76.5-46.8,76.5-94.6
          c0-36.3-27.7-58.3-62.1-58.3c-52.6,0-79.3,31.6-82.2,82.2v18.2H155.3z M299.6,572.3h177.8v177.8H299.6V572.3z"/>
      </g>
    </svg>,
  show:
    <svg xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" viewBox="0 0 456.793 456.793" xmlSpace="preserve">
      <g>
        <g>
          <path d="M448.947,218.474c-0.922-1.168-23.055-28.933-61-56.81c-50.707-37.253-105.879-56.944-159.551-56.944
            c-53.673,0-108.845,19.691-159.551,56.944c-37.944,27.876-60.077,55.642-61,56.81L0,228.396l7.845,9.923
            c0.923,1.168,23.056,28.934,61,56.811c50.707,37.254,105.878,56.943,159.551,56.943c53.672,0,108.844-19.689,159.551-56.943
            c37.945-27.877,60.078-55.643,61-56.811l7.846-9.923L448.947,218.474z M228.396,312.096c-46.152,0-83.699-37.548-83.699-83.699
            c0-46.152,37.547-83.699,83.699-83.699s83.7,37.547,83.7,83.699C312.096,274.548,274.548,312.096,228.396,312.096z
             M41.685,228.396c9.197-9.872,25.32-25.764,46.833-41.478c13.911-10.16,31.442-21.181,51.772-30.305
            c-15.989,19.589-25.593,44.584-25.593,71.782s9.604,52.193,25.593,71.782c-20.329-9.124-37.861-20.146-51.771-30.306
            C67.002,254.159,50.878,238.265,41.685,228.396z M368.273,269.874c-13.912,10.16-31.443,21.182-51.771,30.306
            c15.988-19.589,25.594-44.584,25.594-71.782s-9.605-52.193-25.594-71.782c20.33,9.124,37.861,20.146,51.771,30.305
            c21.516,15.715,37.639,31.609,46.832,41.477C405.91,238.268,389.785,254.161,368.273,269.874z"/>
          <path d="M223.646,168.834c-27.513,4-50.791,31.432-41.752,59.562c8.23-20.318,25.457-33.991,45.795-32.917
            c16.336,0.863,33.983,18.237,33.59,32.228c1.488,22.407-12.725,39.047-32.884,47.191c46.671,15.21,73.197-44.368,51.818-79.352
            C268.232,175.942,245.969,166.23,223.646,168.834z"/>
        </g>
      </g>
    </svg>,
  pdf:
    <svg viewBox="0 0 550 550">
      <use xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" xmlSpace="preserve" />
      <g>
        <g>
          <path d="M160.381,282.225c0-14.832-10.299-23.684-28.474-23.684c-7.414,0-12.437,0.715-15.071,1.432V307.6   c3.114,0.707,6.942,0.949,12.192,0.949C148.419,308.549,160.381,298.74,160.381,282.225z" dataoriginal="#000000"></path>
          <path d="M272.875,259.019c-8.145,0-13.397,0.717-16.519,1.435v105.523c3.116,0.729,8.142,0.729,12.69,0.729   c33.017,0.231,54.554-17.946,54.554-56.474C323.842,276.719,304.215,259.019,272.875,259.019z" dataoriginal="#000000"></path>
          <path d="M488.426,197.019H475.2v-63.816c0-0.398-0.063-0.799-0.116-1.202c-0.021-2.534-0.827-5.023-2.562-6.995L366.325,3.694   c-0.032-0.031-0.063-0.042-0.085-0.076c-0.633-0.707-1.371-1.295-2.151-1.804c-0.231-0.155-0.464-0.285-0.706-0.419   c-0.676-0.369-1.393-0.675-2.131-0.896c-0.2-0.056-0.38-0.138-0.58-0.19C359.87,0.119,359.037,0,358.193,0H97.2   c-11.918,0-21.6,9.693-21.6,21.601v175.413H62.377c-17.049,0-30.873,13.818-30.873,30.873v160.545   c0,17.043,13.824,30.87,30.873,30.87h13.224V529.2c0,11.907,9.682,21.601,21.6,21.601h356.4c11.907,0,21.6-9.693,21.6-21.601   V419.302h13.226c17.044,0,30.871-13.827,30.871-30.87v-160.54C519.297,210.838,505.47,197.019,488.426,197.019z M97.2,21.605   h250.193v110.513c0,5.967,4.841,10.8,10.8,10.8h95.407v54.108H97.2V21.605z M362.359,309.023c0,30.876-11.243,52.165-26.82,65.333   c-16.971,14.117-42.82,20.814-74.396,20.814c-18.9,0-32.297-1.197-41.401-2.389V234.365c13.399-2.149,30.878-3.346,49.304-3.346   c30.612,0,50.478,5.508,66.039,17.226C351.828,260.69,362.359,280.547,362.359,309.023z M80.7,393.499V234.365   c11.241-1.904,27.042-3.346,49.296-3.346c22.491,0,38.527,4.308,49.291,12.928c10.292,8.131,17.215,21.534,17.215,37.328   c0,15.799-5.25,29.198-14.829,38.285c-12.442,11.728-30.865,16.996-52.407,16.996c-4.778,0-9.1-0.243-12.435-0.723v57.67H80.7   V393.499z M453.601,523.353H97.2V419.302h356.4V523.353z M484.898,262.127h-61.989v36.851h57.913v29.674h-57.913v64.848h-36.593   V232.216h98.582V262.127z" dataoriginal="#000000"></path>
        </g>
      </g>
    </svg>
}